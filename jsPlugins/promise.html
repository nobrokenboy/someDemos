<!DOCTYPE html>
<html>
	<head>
        <meta charset="UTF-8">
    </head>
    <body>
          <h1>test,哈哈哈</h1>
          <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
          <script>
              //请求接口
              function getData(){
                return $.ajax({
                    url:"./data/data.json",
                    type:"GET",
                    data:{

                    },
                    success(res){
                        console.log('成功了');
                        console.log(res);    
                        return new Promise((resolve,reject)=>{
                            resolve(res);   
                        });
                    },
                    error(error){
                        console.log('失败了');
                        console.log(error); 
                        return new Promise((resolve,reject)=>{
                            reject(error);   
                        });   
                    }   
                });  
                
              }
              
              
              function getChildrenData(moduleCode){
                return $.ajax({
                    url:"./data/second.json",
                    type:"GET",
                    data:{
                       code:moduleCode         
                    },
                    success(res){
                        console.log('成功了');
                        console.log(res);    
                        return new Promise((resolve,reject)=>{
                            resolve(res);   
                        });
                    },
                    error(error){
                        console.log('失败了');
                        console.log(error); 
                        return new Promise((resolve,reject)=>{
                            reject(error);   
                        });   
                    }   
                });   
              }

              getData().then((res)=>{
                 console.log(res);
                 console.log(res.data);
                 if(res.code==0){
                   res.data.forEach((item)=>{
                    //   return getChildrenData(item.code);
                   });     
                 }
              }).then((res1)=>{
                  console.log(res1);
              }).catch(error=>{
                  console.log(error);
              });

          </script>  
    </body>
</html>